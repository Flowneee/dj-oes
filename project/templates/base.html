<!DOCTYPE html>
{% load i18n %}
{% load staticfiles %}

{# Load the tag library #}
{% load bootstrap3 %}

{# Load CSS and JavaScript #}
{% bootstrap_css %}
{% bootstrap_javascript jquery=True %}

{# Display django.contrib.messages as Bootstrap alerts #}
{% bootstrap_messages %}

{% load macros %}

{% macro title %}
  {% trans 'Система онлайн тестирования "ЯСЕНЬ"' %} — {% block title %}{% endblock %}
{% endmacro %}

<html>
  <head>
    <meta charset="utf-8">
    <link href="{% static 'ckeditor/ckeditor/plugins/codesnippet/lib/highlight/styles/default.css' %}"
          rel="stylesheet">
    {% block extrahead %}{% endblock %}
    <title>
      {% use_macro title %}
    </title>
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
      <div class="container-fluid">
        <div class="navbar-header">
          <a class="navbar-brand" href="{% url 'index' %}">{% use_macro title %}</a>
        </div>
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav navbar-right">
            <form class="navbar-form pull-right" method="get" action="{% url 'search' %}">
              <input type="text" class="form-control" name="pattern" placeholder="Поиск" />
              <button type="submit" class="btn btn-default">{% trans 'Поиск' %}</button>
            </form>
            {% if user.is_authenticated %}
              <li class="navbar-text">{% trans 'Добро пожаловать'  %}, {{ user.get_short_name }}</li>
              <div class="dropdown navbar-form" style="display: inline-block;">
                <button class="btn btn-link dropdown-toggle" type="button" data-toggle="dropdown">{% trans 'Меню' %}
                  <span class="caret"></span>
                </button>
                <ul class="dropdown-menu">

                    <li><a href="{% url 'index' %}">{% trans 'Главная'  %}</a></li>
                    <li><a href="/admin">{% trans 'Панель администратора'  %}</a></li>
                    <li><a href="{% url 'logout' %}">{% trans 'Выход'  %}</a></li>

                </ul>
              </div>
            {% else %}
              <li><a href="{% url 'register' %}">{% trans 'Регистрация' %}</a></li>
              <li><a href="{% url 'login' %}">{% trans 'Вход'  %}</a></li>
            {% endif %}
          </ul>
        </div>
      </div>
    </div>


    <div class="container-fluid" style="padding-top: 60px;">
      <div class="col-xs-2 col-xs-offset-1">
        <div class="btn-group-vertical pull-right" role="group" aria-label="Навигация по сайту">
          <a href="{% url 'index' %}" class="btn btn-default">
            {% trans 'Главная' %}
          </a>
          <a href="{% url 'public_testing_main' %}" class="btn btn-default">
            {% trans 'Тестирование' %}
          </a>
          {% if user.is_active %}
            <a href="{% url 'control_testing_list' %}" class="btn btn-default">
              {% trans 'Контрольное тестирование' %}
            </a>
            <a href="{% url 'question_new' %}" class="btn btn-default">
              {% trans 'Добавить вопрос' %}
            </a>
            <a href="{% url 'upload_csv' %}" class="btn btn-default">
              {% trans 'Загрузить вопросы' %}
            </a>
            {% if user.account_level == '2' or user_account_level == '3' %}
              <a href="{% url 'test_new' %}" class="btn btn-default">
                {% trans 'Создать тест' %}
              </a>
            {% endif %}
            {% if user.account_level == '3' %}
              <a href="/admin/" class="btn btn-default">
                {% trans 'Панель администратора' %}
              </a>
            {% endif %}
          {% endif %}
        </div>
      </div>
      <div id="content">
        {% block content %}{% endblock %}
      </div>
    </div>

    <script type="text/javascript" async
            src="{% static 'django_ajax/js/jquery.ajax.min.js' %}"></script>
    <script type="text/javascript" async
            src="{% static 'django_ajax/js/jquery.ajax-plugin.min.js' %}">
    </script>
    <script type="text/x-mathjax-config">
     MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
    </script>
    <script type="text/javascript" async
            src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML">
    </script>
    <script src="{% static 'ckeditor/ckeditor/plugins/codesnippet/lib/highlight/highlight.pack.js' %}">
    </script>
    <script>hljs.initHighlightingOnLoad();</script>
    {% block scripts %}{% endblock %}
  </body>
</html>
